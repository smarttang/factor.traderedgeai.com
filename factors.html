<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>算法因子市场 | TraderEdgeAIFactor</title>
  <meta name="description" content="引入 DLL 后可选用的算法因子库，每个因子带策略标签（高频、长线、货币对冲、马丁、网格等），方便根据交易习惯选择。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #ffffff;
      --bg-alt: #fafafa;
      --text: #202020;
      --text-muted: #5c5c5c;
      --green: #4da29e;
      --green-dark: #3d8582;
      --gray-pill: #f0f0f0;
      --gray-border: #e8e8e8;
      --radius: 12px;
      --radius-sm: 8px;
      --max-w: 1100px;
      --max-w-narrow: 720px;
    }

    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    body {
      overflow-x: hidden;
      font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: antialiased;
    }

    .wrap {
      max-width: var(--max-w);
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    .wrap-narrow {
      max-width: var(--max-w-narrow);
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 56px;
      padding: 0 1.5rem;
      border-bottom: 1px solid var(--gray-border);
      background: var(--bg);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      height: 100%;
    }

    .nav-logo img {
      max-height: 28px;
      width: auto;
      height: auto;
      display: block;
      object-fit: contain;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .nav-links a:hover {
      color: var(--text);
    }

    .nav-links a.nav-here {
      color: var(--green);
      font-weight: 600;
    }

    .nav-links a.nav-cta {
      padding: 0.5rem 1rem;
      background: var(--green);
      color: #fff !important;
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 0.85rem;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .nav-links a.nav-cta:hover {
      background: var(--green-dark);
      color: #fff !important;
    }

    .nav-cta .nav-price {
      font-weight: 500;
      font-size: 0.8rem;
      opacity: 0.95;
    }

    .nav-cta .nav-price s {
      color: rgba(255, 255, 255, 0.7);
      margin-right: 0.25rem;
    }

    .nav-lang {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .nav-lang button {
      padding: 0.35rem 0.6rem;
      background: transparent;
      border: 1px solid var(--gray-border);
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-muted);
      cursor: pointer;
      font-family: inherit;
    }

    .nav-lang button:hover {
      color: var(--text);
      border-color: var(--text-muted);
    }

    .page-hero {
      padding: 3rem 1.5rem 2rem;
      text-align: center;
    }

    .page-hero h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin: 0 0 0.75rem;
      color: var(--text);
    }

    .page-hero p {
      font-size: 1.05rem;
      color: var(--text-muted);
      margin: 0;
      max-width: 560px;
      margin-left: auto;
      margin-right: auto;
    }

    .factors-sec {
      padding: 0 1.5rem 4rem;
      max-width: 1410px;
      margin: 0 auto;
    }

    .factors-layout {
      display: grid;
      grid-template-columns: 200px 1fr;
      gap: 2rem;
      align-items: start;
    }

    .factors-sidebar {
      position: sticky;
      top: 72px;
      padding: 1rem 0;
      border-right: 1px solid var(--gray-border);
    }

    .factors-sidebar-title {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin: 0 0 0.75rem;
      padding: 0 0.5rem;
    }

    .factor-tag-filter {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .factor-tag-filter .tag-btn {
      display: block;
      width: 100%;
      text-align: left;
      padding: 0.5rem 0.75rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text);
      cursor: pointer;
      font-family: inherit;
      transition: background 0.2s, color 0.2s;
    }

    .factor-tag-filter .tag-btn:hover {
      background: var(--gray-pill);
      color: var(--text);
    }

    .factor-tag-filter .tag-btn.active {
      background: rgba(77, 162, 158, 0.12);
      color: var(--green-dark);
    }

    .filter-group-label {
      display: block;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--text-muted);
      margin: 0.75rem 0.5rem 0.35rem;
      opacity: 0.85;
    }

    .filter-group-label:first-of-type {
      margin-top: 0.25rem;
    }

    .factors-main {
      min-width: 0;
    }

    .factors-intro {
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
      color: var(--text-muted);
    }

    .factor-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1rem;
    }

    .factor-card {
      background: var(--bg);
      border: 1px solid var(--gray-border);
      border-radius: var(--radius);
      padding: 1rem 1.1rem;
      transition: border-color 0.2s, box-shadow 0.2s;
      min-height: 0;
    }

    .factor-card:hover {
      border-color: var(--green);
      box-shadow: 0 6px 20px rgba(77, 162, 158, 0.1);
    }

    .factor-card-head {
      display: flex;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 0.5rem;
    }

    .factor-card-head strong {
      font-size: 1rem;
      color: var(--text);
      letter-spacing: -0.02em;
      word-break: break-word;
    }

    .factor-id-badge {
      font-size: 0.7rem;
      font-family: 'JetBrains Mono', monospace;
      padding: 0.2rem 0.5rem;
      background: var(--gray-pill);
      color: var(--text-muted);
      border-radius: 4px;
      font-weight: 500;
    }

    .factor-name-en {
      font-size: 0.8rem;
      color: var(--text-muted);
      width: 100%;
    }

    .factor-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
      margin-bottom: 0.5rem;
    }

    .factor-tag {
      display: inline-block;
      padding: 0.2rem 0.5rem;
      background: rgba(77, 162, 158, 0.12);
      color: var(--green-dark);
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    .factor-card-desc {
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.5;
      margin: 0;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .factor-card-mqh {
      font-size: 0.72rem;
      font-family: 'JetBrains Mono', monospace;
      color: var(--text-muted);
      margin-top: 0.5rem;
      padding-top: 0.5rem;
      border-top: 1px dashed var(--gray-border);
    }

    .factors-group-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--text-muted);
      margin: 1.5rem 0 0.75rem;
      padding-bottom: 0.35rem;
      border-bottom: 1px solid var(--gray-border);
    }

    .factors-group-title:first-of-type {
      margin-top: 0;
    }

    .factor-badge-composite {
      font-size: 0.7rem;
      padding: 0.15rem 0.4rem;
      background: var(--green);
      color: #fff;
      border-radius: 4px;
      font-weight: 600;
    }

    .factor-card-composite {
      border-left: 3px solid var(--green);
    }

    .pagination-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
      padding: 1rem 0;
      flex-wrap: wrap;
    }

    .pagination-wrap button {
      padding: 0.5rem 1rem;
      background: var(--gray-pill);
      border: 1px solid var(--gray-border);
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text);
      cursor: pointer;
      font-family: inherit;
    }

    .pagination-wrap button:hover:not(:disabled) {
      background: rgba(77, 162, 158, 0.12);
      border-color: var(--green);
      color: var(--green-dark);
    }

    .pagination-wrap button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .pagination-info {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .factors-count-bar {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    .back-cta {
      text-align: center;
      padding: 3rem 1.5rem;
      margin-top: 2rem;
      border-top: 1px solid var(--gray-border);
    }

    .back-cta a {
      color: var(--green);
      font-weight: 500;
      text-decoration: none;
    }

    .back-cta a:hover {
      text-decoration: underline;
    }

    footer {
      padding: 2rem 1.5rem;
      border-top: 1px solid var(--gray-border);
      background: var(--bg);
    }

    .footer-inner {
      max-width: 1410px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .footer-links {
      display: flex;
      gap: 1.5rem;
    }

    .footer-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.85rem;
    }

    .footer-links a:hover {
      color: var(--green);
    }

    .footer-copy {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin: 0;
    }

    @media (max-width: 1024px) {
      .factor-list {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .factors-layout {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .factors-sidebar {
        position: static;
        border-right: none;
        border-bottom: 1px solid var(--gray-border);
        padding-bottom: 1rem;
      }

      .factor-tag-filter {
        flex-direction: row;
        flex-wrap: wrap;
      }

      .factor-tag-filter .tag-btn {
        width: auto;
      }

      .filter-group-label {
        width: 100%;
        margin-top: 1rem;
      }

      .filter-group-label:first-of-type {
        margin-top: 0.5rem;
      }

      .factor-list {
        grid-template-columns: 1fr;
      }
    }

    .nav-lang button.active {
      color: var(--green);
      border-color: var(--green);
      background: rgba(77, 162, 158, 0.08);
    }

    .nav-toggle {
      display: none;
      width: 44px;
      height: 44px;
      padding: 0;
      background: transparent;
      border: none;
      border-radius: var(--radius-sm);
      color: var(--text);
      cursor: pointer;
      font-size: 1.25rem;
    }

    .nav-toggle:hover {
      background: var(--gray-pill);
    }

    @media (max-width: 900px) {
      .nav {
        flex-wrap: wrap;
        padding: 0 1rem;
        padding-bottom: 0;
        height: auto;
        min-height: 56px;
      }

      .nav-links {
        display: none;
        order: 10;
        width: 100%;
        flex-direction: column;
        gap: 0;
        padding: 0.5rem 0 1rem;
        border-top: 1px solid var(--gray-border);
      }

      .nav.nav-open .nav-links {
        display: flex;
      }

      .nav-links a {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        min-height: 44px;
        box-sizing: border-box;
      }

      .nav-links a:hover {
        background: var(--gray-pill);
      }

      .nav-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 44px;
        min-height: 44px;
      }

      .nav-lang {
        margin-left: auto;
        margin-right: 0.25rem;
      }

      .nav-lang button {
        min-height: 36px;
        min-width: 44px;
      }
    }

    @media (max-width: 640px) {
      .wrap {
        padding: 0 1rem;
      }

      .factors-sec {
        padding: 0 1rem 2rem;
      }

      .page-hero {
        padding: 2rem 1rem;
      }

      .page-hero h1 {
        font-size: 1.5rem;
      }

      .factor-tag-filter .tag-btn {
        min-height: 44px;
        padding: 0.5rem 0.75rem;
      }

      .factor-card {
        padding: 1rem;
      }
    }
  </style>
</head>

<body data-i18n-page="factors">

  <nav class="nav" id="main-nav">
    <a href="index.html" class="nav-logo"><img src="logo.png" alt="TraderEdgeAIFactor" /></a>
    <div class="nav-links">
      <a href="index.html#how" data-i18n="nav_how">极速上手</a>
      <a href="index.html#features" data-i18n="nav_features">核心能力</a>
      <a href="factors.html" class="nav-here" data-i18n="nav_factors">算法因子</a>
      <a href="api.html" data-i18n="nav_api">API 文档</a>
      <a href="index.html#pricing" data-i18n="nav_pricing">定价</a>
      <a href="index.html#faq" data-i18n="nav_faq">常见问题</a>
      <a href="index.html#pricing" class="nav-cta"><span data-i18n="nav_cta">购买专业版</span> <span class="nav-price"
          data-i18n="nav_price" data-i18n-html="1"><s>$38/月</s> $30/月</span></a>
    </div>
    <div class="nav-lang">
      <button type="button" class="lang-btn active" data-lang="zh" aria-label="中文">中文</button>
      <button type="button" class="lang-btn" data-lang="en" aria-label="English">EN</button>
    </div>
    <button type="button" class="nav-toggle" id="nav-toggle" aria-label="菜单" data-i18n-attr="aria-label:nav_toggle_aria">☰</button>
  </nav>

  <header class="page-hero">
    <h1 data-i18n="page_title">算法因子市场</h1>
    <p data-i18n="page_desc">按交易场景筛选，快速找到适合你策略的算法因子。</p>
  </header>

  <section class="factors-sec">
    <div class="factors-layout">
      <aside class="factors-sidebar" role="navigation" aria-label="按策略标签筛选" data-i18n-attr="aria-label:sidebar_aria">
        <h2 class="factors-sidebar-title" data-i18n="sidebar_title">按场景筛选</h2>
        <div class="factor-tag-filter" role="group" aria-label="按策略标签筛选" data-i18n-attr="aria-label:sidebar_aria">
          <button type="button" class="tag-btn active" data-tag="" data-i18n="tag_all">全部</button>
          <span class="filter-group-label" data-i18n="filter_group_type">接口类型</span>
          <button type="button" class="tag-btn" data-tag="__unified__" data-i18n="tag_unified">统一接口</button>
          <button type="button" class="tag-btn" data-tag="__standalone__" data-i18n="tag_standalone">独立 API</button>
          <span class="filter-group-label" data-i18n="filter_group_style">交易风格</span>
          <button type="button" class="tag-btn" data-tag="趋势" data-i18n="tag_trend">趋势</button>
          <button type="button" class="tag-btn" data-tag="对冲" data-i18n="tag_hedge">对冲</button>
          <button type="button" class="tag-btn" data-tag="网格" data-i18n="tag_grid">网格</button>
          <button type="button" class="tag-btn" data-tag="马丁" data-i18n="tag_martin">马丁</button>
          <button type="button" class="tag-btn" data-tag="短线" data-i18n="tag_short">短线</button>
          <button type="button" class="tag-btn" data-tag="波段" data-i18n="tag_swing">波段</button>
          <span class="filter-group-label" data-i18n="filter_group_signal">信号类型</span>
          <button type="button" class="tag-btn" data-tag="波动" data-i18n="tag_vol">波动</button>
          <button type="button" class="tag-btn" data-tag="减仓" data-i18n="tag_reduction">减仓</button>
          <button type="button" class="tag-btn" data-tag="组合" data-i18n="tag_composite">组合</button>
          <button type="button" class="tag-btn" data-tag="动量" data-i18n="tag_momentum">动量</button>
          <button type="button" class="tag-btn" data-tag="多周期" data-i18n="tag_mtf">多周期</button>
          <button type="button" class="tag-btn" data-tag="价差" data-i18n="tag_spread">价差</button>
          <button type="button" class="tag-btn" data-tag="R²" data-i18n="tag_r2">R²</button>
        </div>
      </aside>

      <main class="factors-main">
        <h3 class="factors-group-title" data-i18n="factors_group_all">所有算法因子和组合</h3>
        <p class="factors-count-bar" id="factors-count-bar"></p>
        <div class="factor-list" id="factor-list-handle"></div>
        <div class="pagination-wrap" id="pagination-wrap" style="display:none;">
          <button type="button" id="pagination-prev" disabled><span data-i18n="pagination_prev">上一页</span></button>
          <span class="pagination-info" id="pagination-info"></span>
          <button type="button" id="pagination-next"><span data-i18n="pagination_next">下一页</span></button>
        </div>
        <div class="back-cta">
          <a href="api.html#quick" data-i18n="api_quick_start">API 快速接入</a>
          <span style="color: var(--gray-border); margin: 0 0.5rem;">|</span>
          <a href="index.html#products" data-i18n="back">← 返回产品介绍</a>
        </div>
      </main>
    </div>
  </section>

  <footer>
    <div class="footer-inner">
      <div class="footer-links">
        <a href="index.html">TraderEdgeAIFactor</a>
        <a href="releases/v1.0/mql4-include.zip" download data-i18n="footer_download">下载</a>
        <a href="index.html#how" data-i18n="footer_how">极速上手</a>
        <a href="api.html" data-i18n="footer_api">API 文档</a>
        <a href="index.html#pricing" data-i18n="footer_pricing">定价</a>
        <a href="index.html#faq" data-i18n="footer_faq">常见问题</a>
      </div>
      <p class="footer-copy" data-i18n="footer_copy">© TraderEdgeAI.com 使用前请阅读授权与免责声明。</p>
    </div>
  </footer>

  <script src="js/i18n.js"></script>
  <script>
    (function () {
      var PER_PAGE = 12;
      var FACTORS = [
        { id: 0, name: 'EntropyHedge', tags: ['中长线','波段','趋势','对冲'], subKey: 'factor_entropy_sub', descKey: 'factor_entropy_desc', mqh: 'Init("EntropyHedge") 或 TEA_FactorCreate(0)', isComposite: false, isStandalone: false },
        { id: 1, name: 'TrendPenalty', tags: ['网格','马丁','短线'], subKey: 'factor_trend_sub', descKey: 'factor_trend_desc', mqh: 'Init("TrendPenalty") 或 TEA_FactorCreate(1)', isComposite: false, isStandalone: false },
        { id: 2, name: 'HedgeRegime', tags: ['趋势','对冲','马丁','网格'], subKey: 'factor_hedge_regime_sub', descKey: 'factor_hedge_regime_desc', mqh: 'Init("HedgeRegime") 或 TEA_FactorCreate(2)', isComposite: false, isStandalone: false },
        { id: 3, name: 'TrendStrengthBrake', tags: ['趋势','R²','波段'], subKey: 'factor_trend_strength_sub', descKey: 'factor_trend_strength_desc', mqh: 'Init("TrendStrengthBrake") 或 TEA_FactorCreate(3)', isComposite: false, isStandalone: false },
        { id: 4, name: 'VolatilitySpike', tags: ['波动','对冲'], subKey: 'factor_volspike_sub', descKey: 'factor_volspike_desc', mqh: 'Init("VolatilitySpike") 或 TEA_FactorCreate(4)', isComposite: false, isStandalone: false },
        { id: 5, name: 'JumpDetector', tags: ['波动','对冲'], subKey: 'factor_jump_sub', descKey: 'factor_jump_desc', mqh: 'Init("JumpDetector") 或 TEA_FactorCreate(5)', isComposite: false, isStandalone: false },
        { id: 6, name: 'MultiTFAlign', tags: ['多周期','趋势','波段'], subKey: 'factor_mtfalign_sub', descKey: 'factor_mtfalign_desc', mqh: 'Init("MultiTFAlign") 或 TEA_FactorCreate(6)', isComposite: false, isStandalone: false },
        { id: 7, name: 'HurstRegime', tags: ['趋势','R²','波段'], subKey: 'factor_hurst_sub', descKey: 'factor_hurst_desc', mqh: 'Init("HurstRegime") 或 TEA_FactorCreate(7)', isComposite: false, isStandalone: false },
        { id: 8, name: 'HedgeCore', tags: ['组合','趋势','对冲','马丁','网格'], subKey: 'factor_hedgecore_sub', descKey: 'factor_hedgecore_desc', mqh: 'Init("HedgeCore") 或 TEA_FactorCreate(8)', isComposite: true, isStandalone: false },
        { id: 9, name: 'StepScale', tags: ['对冲','马丁','网格'], subKey: 'factor_stepscale_sub', descKey: 'factor_stepscale_desc', mqh: 'Init("StepScale") 或 TEA_FactorCreate(9)', isComposite: false, isStandalone: false },
        { id: 10, name: 'MomentumExhaustion', tags: ['动量','趋势','波段'], subKey: 'factor_momentum_exhaust_sub', descKey: 'factor_momentum_exhaust_desc', mqh: 'Init("MomentumExhaustion") 或 TEA_FactorCreate(10)', isComposite: false, isStandalone: false },
        { id: 11, name: 'VolatilityRegime', tags: ['波动','对冲'], subKey: 'factor_volregime_sub', descKey: 'factor_volregime_desc', mqh: 'Init("VolatilityRegime") 或 TEA_FactorCreate(11)', isComposite: false, isStandalone: false },
        { id: 12, name: 'GapFillScore', tags: ['动量','波动'], subKey: 'factor_gapfill_sub', descKey: 'factor_gapfill_desc', mqh: 'Init("GapFillScore") 或 TEA_FactorCreate(12)', isComposite: false, isStandalone: false },
        { id: 13, name: 'AsymmetricBrake', tags: ['趋势','对冲','马丁'], subKey: 'factor_asymbrake_sub', descKey: 'factor_asymbrake_desc', mqh: 'Init("AsymmetricBrake") 或 TEA_FactorCreate(13)', isComposite: false, isStandalone: false },
        { id: 14, name: 'VolatilityAdjustedMomentum', tags: ['动量','波动'], subKey: 'factor_vam_sub', descKey: 'factor_vam_desc', mqh: 'Init("VolatilityAdjustedMomentum") 或 TEA_FactorCreate(14)', isComposite: false, isStandalone: false },
        { id: 15, name: 'AdaptiveTrendIntensity', tags: ['动量','趋势','波段'], subKey: 'factor_ati_sub', descKey: 'factor_ati_desc', mqh: 'Init("AdaptiveTrendIntensity") 或 TEA_FactorCreate(15)', isComposite: false, isStandalone: false },
        { id: 16, name: 'MultiTimeframeResonance', tags: ['多周期','趋势','波段'], subKey: 'factor_mtr_sub', descKey: 'factor_mtr_desc', mqh: 'Init("MultiTimeframeResonance") 或 TEA_FactorCreate(16)', isComposite: false, isStandalone: false },
        { id: 17, name: 'ChoppinessIndex', tags: ['波动','波段'], subKey: 'factor_choppiness_sub', descKey: 'factor_choppiness_desc', mqh: 'Init("ChoppinessIndex") 或 TEA_FactorCreate(17)', isComposite: false, isStandalone: false },
        { id: 18, name: 'RealizedVolatility', tags: ['波动'], subKey: 'factor_realized_volatility_sub', descKey: 'factor_realized_volatility_desc', mqh: 'Init("RealizedVolatility") 或 TEA_FactorCreate(18)', isComposite: false, isStandalone: false },
        { id: 19, name: 'VarianceRatio', tags: ['趋势','R²'], subKey: 'factor_variance_ratio_sub', descKey: 'factor_variance_ratio_desc', mqh: 'Init("VarianceRatio") 或 TEA_FactorCreate(19)', isComposite: false, isStandalone: false },
        { id: 20, name: 'Aroon', tags: ['趋势','动量'], subKey: 'factor_aroon_sub', descKey: 'factor_aroon_desc', mqh: 'Init("Aroon") 或 TEA_FactorCreate(20)', isComposite: false, isStandalone: false },
        { id: 21, name: 'VWAPDeviation', tags: ['波动','短线'], subKey: 'factor_vwap_deviation_sub', descKey: 'factor_vwap_deviation_desc', mqh: 'Init("VWAPDeviation") 或 TEA_FactorCreate(21)', isComposite: false, isStandalone: false },
        { id: 22, name: 'BBSqueeze', tags: ['趋势','波动'], subKey: 'factor_bbsqueeze_sub', descKey: 'factor_bbsqueeze_desc', mqh: 'Init("BBSqueeze") 或 TEA_FactorCreate(22)', isComposite: false, isStandalone: false },
        { id: 23, name: 'GarmanKlass', tags: ['波动'], subKey: 'factor_garman_klass_sub', descKey: 'factor_garman_klass_desc', mqh: 'Init("GarmanKlass") 或 TEA_FactorCreate(23)', isComposite: false, isStandalone: false },
        { id: 24, name: 'Parkinson', tags: ['波动'], subKey: 'factor_parkinson_sub', descKey: 'factor_parkinson_desc', mqh: 'Init("Parkinson") 或 TEA_FactorCreate(24)', isComposite: false, isStandalone: false },
        { id: 25, name: 'YangZhang', tags: ['波动'], subKey: 'factor_yangzhang_sub', descKey: 'factor_yangzhang_desc', mqh: 'Init("YangZhang") 或 TEA_FactorCreate(25)', isComposite: false, isStandalone: false },
        { id: 26, name: 'RealizedSkewness', tags: ['波动'], subKey: 'factor_realized_skewness_sub', descKey: 'factor_realized_skewness_desc', mqh: 'Init("RealizedSkewness") 或 TEA_FactorCreate(26)', isComposite: false, isStandalone: false },
        { id: 27, name: 'RealizedKurtosis', tags: ['波动'], subKey: 'factor_realized_kurtosis_sub', descKey: 'factor_realized_kurtosis_desc', mqh: 'Init("RealizedKurtosis") 或 TEA_FactorCreate(27)', isComposite: false, isStandalone: false },
        { id: 28, name: 'VolatilityCone', tags: ['波动'], subKey: 'factor_volatility_cone_sub', descKey: 'factor_volatility_cone_desc', mqh: 'Init("VolatilityCone") 或 TEA_FactorCreate(28)', isComposite: false, isStandalone: false },
        { id: 29, name: 'LinearRegressionSlope', tags: ['趋势','R²'], subKey: 'factor_linear_regression_slope_sub', descKey: 'factor_linear_regression_slope_desc', mqh: 'Init("LinearRegressionSlope") 或 TEA_FactorCreate(29)', isComposite: false, isStandalone: false },
        { id: 30, name: 'OUParams', tags: ['趋势','波段'], subKey: 'factor_ou_params_sub', descKey: 'factor_ou_params_desc', mqh: 'Init("OUParams") 或 TEA_FactorCreate(30)', isComposite: false, isStandalone: false },
        { id: 31, name: 'Autocorrelation', tags: ['趋势','动量'], subKey: 'factor_autocorrelation_sub', descKey: 'factor_autocorrelation_desc', mqh: 'Init("Autocorrelation") 或 TEA_FactorCreate(31)', isComposite: false, isStandalone: false },
        { id: 32, name: 'BBKCSqueeze', tags: ['趋势','波动'], subKey: 'factor_bbkc_squeeze_sub', descKey: 'factor_bbkc_squeeze_desc', mqh: 'Init("BBKCSqueeze") 或 TEA_FactorCreate(32)', isComposite: false, isStandalone: false },
        { id: 33, name: 'PriceAcceleration', tags: ['动量','短线'], subKey: 'factor_price_acceleration_sub', descKey: 'factor_price_acceleration_desc', mqh: 'Init("PriceAcceleration") 或 TEA_FactorCreate(33)', isComposite: false, isStandalone: false },
        { id: 34, name: 'VolumeROC', tags: ['动量','波动'], subKey: 'factor_volume_roc_sub', descKey: 'factor_volume_roc_desc', mqh: 'Init("VolumeROC") 或 TEA_FactorCreate(34)', isComposite: false, isStandalone: false },
        { id: 35, name: 'FRAMA', tags: ['趋势','波段'], subKey: 'factor_frama_sub', descKey: 'factor_frama_desc', mqh: 'Init("FRAMA") 或 TEA_FactorCreate(35)', isComposite: false, isStandalone: false },
        { id: 36, name: 'HMA', tags: ['趋势','波段'], subKey: 'factor_hma_sub', descKey: 'factor_hma_desc', mqh: 'Init("HMA") 或 TEA_FactorCreate(36)', isComposite: false, isStandalone: false },
        { id: 37, name: 'TickIntensity', tags: ['波动','短线'], subKey: 'factor_tick_intensity_sub', descKey: 'factor_tick_intensity_desc', mqh: 'Init("TickIntensity") 或 TEA_FactorCreate(37)', isComposite: false, isStandalone: false },
        { id: 38, name: 'TickRun', tags: ['动量','短线'], subKey: 'factor_tick_run_sub', descKey: 'factor_tick_run_desc', mqh: 'Init("TickRun") 或 TEA_FactorCreate(38)', isComposite: false, isStandalone: false },
        { id: 39, name: 'TradeClustering', tags: ['波动','短线'], subKey: 'factor_trade_clustering_sub', descKey: 'factor_trade_clustering_desc', mqh: 'Init("TradeClustering") 或 TEA_FactorCreate(39)', isComposite: false, isStandalone: false },
        { id: 41, name: 'JMA', tags: ['趋势','波段'], subKey: 'factor_jma_sub', descKey: 'factor_jma_desc', mqh: 'Init("JMA") 或 TEA_FactorCreate(41)', isComposite: false, isStandalone: false },
        { id: 42, name: 'ADXROC', tags: ['趋势','动量'], subKey: 'factor_adxroc_sub', descKey: 'factor_adxroc_desc', mqh: 'Init("ADXROC") 或 TEA_FactorCreate(42)', isComposite: false, isStandalone: false },
        { id: 43, name: 'RMI', tags: ['动量','趋势'], subKey: 'factor_rmi_sub', descKey: 'factor_rmi_desc', mqh: 'Init("RMI") 或 TEA_FactorCreate(43)', isComposite: false, isStandalone: false },
        { id: 44, name: 'Overreaction', tags: ['动量','波动'], subKey: 'factor_overreaction_sub', descKey: 'factor_overreaction_desc', mqh: 'Init("Overreaction") 或 TEA_FactorCreate(44)', isComposite: false, isStandalone: false },
        { id: 45, name: 'ADLine', tags: ['动量','价差'], subKey: 'factor_adline_sub', descKey: 'factor_adline_desc', mqh: 'Init("ADLine") 或 TEA_FactorCreate(45)', isComposite: false, isStandalone: false },
        { id: 46, name: 'VWMACD', tags: ['动量','趋势'], subKey: 'factor_vwmacd_sub', descKey: 'factor_vwmacd_desc', mqh: 'Init("VWMACD") 或 TEA_FactorCreate(46)', isComposite: false, isStandalone: false },
        { id: 47, name: 'NVI', tags: ['动量','趋势'], subKey: 'factor_nvi_sub', descKey: 'factor_nvi_desc', mqh: 'Init("NVI") 或 TEA_FactorCreate(47)', isComposite: false, isStandalone: false },
        { id: 48, name: 'PVI', tags: ['动量','趋势'], subKey: 'factor_pvi_sub', descKey: 'factor_pvi_desc', mqh: 'Init("PVI") 或 TEA_FactorCreate(48)', isComposite: false, isStandalone: false },
        { id: 49, name: 'VPT', tags: ['动量','趋势'], subKey: 'factor_vpt_sub', descKey: 'factor_vpt_desc', mqh: 'Init("VPT") 或 TEA_FactorCreate(49)', isComposite: false, isStandalone: false },
        { id: 50, name: 'EngulfStrength', tags: ['动量','短线'], subKey: 'factor_engulf_strength_sub', descKey: 'factor_engulf_strength_desc', mqh: 'Init("EngulfStrength") 或 TEA_FactorCreate(50)', isComposite: false, isStandalone: false },
        { id: 51, name: 'PinBar', tags: ['短线','波动'], subKey: 'factor_pinbar_sub', descKey: 'factor_pinbar_desc', mqh: 'Init("PinBar") 或 TEA_FactorCreate(51)', isComposite: false, isStandalone: false },
        { id: 52, name: 'InsideBar', tags: ['短线','趋势'], subKey: 'factor_insidebar_sub', descKey: 'factor_insidebar_desc', mqh: 'Init("InsideBar") 或 TEA_FactorCreate(52)', isComposite: false, isStandalone: false },
        { id: 53, name: 'RoundLevel', tags: ['趋势','短线'], subKey: 'factor_roundlevel_sub', descKey: 'factor_roundlevel_desc', mqh: 'Init("RoundLevel") 或 TEA_FactorCreate(53)', isComposite: false, isStandalone: false },
        { id: 54, name: 'PriceGap', tags: ['波动','动量'], subKey: 'factor_pricegap_sub', descKey: 'factor_pricegap_desc', mqh: 'Init("PriceGap") 或 TEA_FactorCreate(54)', isComposite: false, isStandalone: false },
        { id: 55, name: 'ConsecutiveBars', tags: ['动量','短线'], subKey: 'factor_consecutivebars_sub', descKey: 'factor_consecutivebars_desc', mqh: 'Init("ConsecutiveBars") 或 TEA_FactorCreate(55)', isComposite: false, isStandalone: false },
        { id: 56, name: 'LondonMomentum', tags: ['动量','短线'], subKey: 'factor_londonmomentum_sub', descKey: 'factor_londonmomentum_desc', mqh: 'Init("LondonMomentum") 或 TEA_FactorCreate(56)', isComposite: false, isStandalone: false },
        { id: 57, name: 'NYBreakout', tags: ['趋势','短线'], subKey: 'factor_nybreakout_sub', descKey: 'factor_nybreakout_desc', mqh: 'Init("NYBreakout") 或 TEA_FactorCreate(57)', isComposite: false, isStandalone: false },
        { id: 58, name: 'AsianRange', tags: ['趋势','短线'], subKey: 'factor_asianrange_sub', descKey: 'factor_asianrange_desc', mqh: 'Init("AsianRange") 或 TEA_FactorCreate(58)', isComposite: false, isStandalone: false },
        { id: 59, name: 'WeekdayEffect', tags: ['波段','趋势'], subKey: 'factor_weekdayeffect_sub', descKey: 'factor_weekdayeffect_desc', mqh: 'Init("WeekdayEffect") 或 TEA_FactorCreate(59)', isComposite: false, isStandalone: false },
        { id: 60, name: 'MonthlySeasonality', tags: ['波段','趋势'], subKey: 'factor_monthlyseasonality_sub', descKey: 'factor_monthlyseasonality_desc', mqh: 'Init("MonthlySeasonality") 或 TEA_FactorCreate(60)', isComposite: false, isStandalone: false },
        { id: 61, name: 'FixPrice', tags: ['短线','趋势'], subKey: 'factor_fixprice_sub', descKey: 'factor_fixprice_desc', mqh: 'Init("FixPrice") 或 TEA_FactorCreate(61)', isComposite: false, isStandalone: false },
        { id: 69, name: 'PriceEntropy', tags: ['趋势','动量'], subKey: 'factor_priceentropy_sub', descKey: 'factor_priceentropy_desc', mqh: 'Init("PriceEntropy") 或 TEA_FactorCreate(69)', isComposite: false, isStandalone: false },
        { id: 72, name: 'LZComplexity', tags: ['趋势','动量'], subKey: 'factor_lzcomplexity_sub', descKey: 'factor_lzcomplexity_desc', mqh: 'Init("LZComplexity") 或 TEA_FactorCreate(72)', isComposite: false, isStandalone: false },
        { id: 73, name: 'PCAFactor', tags: ['趋势','波动'], subKey: 'factor_pcafactor_sub', descKey: 'factor_pcafactor_desc', mqh: 'Init("PCAFactor") 或 TEA_FactorCreate(73)', isComposite: false, isStandalone: false },
        { id: 74, name: 'AEResidual', tags: ['趋势','波段'], subKey: 'factor_aeresidual_sub', descKey: 'factor_aeresidual_desc', mqh: 'Init("AEResidual") 或 TEA_FactorCreate(74)', isComposite: false, isStandalone: false },
        { id: 75, name: 'ClusterState', tags: ['趋势','波动'], subKey: 'factor_clusterstate_sub', descKey: 'factor_clusterstate_desc', mqh: 'Init("ClusterState") 或 TEA_FactorCreate(75)', isComposite: false, isStandalone: false },
        { id: 79, name: 'LargeOrder', tags: ['波动','短线'], subKey: 'factor_largeorder_sub', descKey: 'factor_largeorder_desc', mqh: 'Init("LargeOrder") 或 TEA_FactorCreate(79)', isComposite: false, isStandalone: false },
        { id: 82, name: 'GARCHVolatility', tags: ['波动'], subKey: 'factor_garchvolatility_sub', descKey: 'factor_garchvolatility_desc', mqh: 'Init("GARCHVolatility") 或 TEA_FactorCreate(82)', isComposite: false, isStandalone: false },
        { id: 84, name: 'QuantileRegression', tags: ['趋势','R²'], subKey: 'factor_quantileregression_sub', descKey: 'factor_quantileregression_desc', mqh: 'Init("QuantileRegression") 或 TEA_FactorCreate(84)', isComposite: false, isStandalone: false },
        { id: 85, name: 'TrendFollowCombo', tags: ['组合','趋势','动量'], subKey: 'factor_trendfollowcombo_sub', descKey: 'factor_trendfollowcombo_desc', mqh: 'Init("TrendFollowCombo") 或 TEA_FactorCreate(85)', isComposite: true, isStandalone: false },
        { id: 86, name: 'MeanReversionCombo', tags: ['组合','趋势','波段'], subKey: 'factor_meanreversioncombo_sub', descKey: 'factor_meanreversioncombo_desc', mqh: 'Init("MeanReversionCombo") 或 TEA_FactorCreate(86)', isComposite: true, isStandalone: false },
        { id: 87, name: 'BreakoutCombo', tags: ['组合','趋势','短线'], subKey: 'factor_breakoutcombo_sub', descKey: 'factor_breakoutcombo_desc', mqh: 'Init("BreakoutCombo") 或 TEA_FactorCreate(87)', isComposite: true, isStandalone: false },
        { id: 88, name: 'ArbitrageCombo', tags: ['组合','价差','对冲'], subKey: 'factor_arbitragecombo_sub', descKey: 'factor_arbitragecombo_desc', mqh: 'Init("ArbitrageCombo") 或 TEA_FactorCreate(88)', isComposite: true, isStandalone: false },
        { id: 89, name: 'MarketMakingCombo', tags: ['组合','波动','对冲'], subKey: 'factor_marketmakingcombo_sub', descKey: 'factor_marketmakingcombo_desc', mqh: 'Init("MarketMakingCombo") 或 TEA_FactorCreate(89)', isComposite: true, isStandalone: false },
        { id: 90, name: 'TimeframeCombo', tags: ['组合','多周期','趋势'], subKey: 'factor_timeframecombo_sub', descKey: 'factor_timeframecombo_desc', mqh: 'Init("TimeframeCombo") 或 TEA_FactorCreate(90)', isComposite: true, isStandalone: false },
        { id: 91, name: 'StateCombo', tags: ['组合','波动','动量'], subKey: 'factor_statecombo_sub', descKey: 'factor_statecombo_desc', mqh: 'Init("StateCombo") 或 TEA_FactorCreate(91)', isComposite: true, isStandalone: false },
        { id: 92, name: 'FusionWeights', tags: ['组合','趋势','动量'], subKey: 'factor_fusionweights_sub', descKey: 'factor_fusionweights_desc', mqh: 'Init("FusionWeights") 或 TEA_FactorCreate(92)', isComposite: true, isStandalone: false },
        { id: 'standalone', name: 'PairSpreadZ', tags: ['价差','对冲'], subKey: 'factor_pairspread_sub', descKey: 'factor_pairspread_desc', mqh: 'TEA_PairSpreadZ', isComposite: false, isStandalone: true },
        { id: 'standalone', name: 'CointegrationSpread', tags: ['价差','对冲'], subKey: 'factor_coint_sub', descKey: 'factor_coint_desc', mqh: 'TEA_CointegrationSpread', isComposite: false, isStandalone: true },
        { id: 'standalone', name: 'RangePosition', tags: ['区间','趋势'], subKey: 'factor_rangepos_sub', descKey: 'factor_rangepos_desc', mqh: 'TEA_RangePosition', isComposite: false, isStandalone: true },
        { id: 'standalone', name: 'SessionRegime', tags: ['波动'], subKey: 'factor_session_sub', descKey: 'factor_session_desc', mqh: 'TEA_SessionRegime', isComposite: false, isStandalone: true },
        { id: 'standalone', name: 'HedgeImbalance', tags: ['减仓','对冲','马丁'], subKey: 'factor_hedgeimb_sub', descKey: 'factor_hedgeimb_desc', mqh: 'TEA_HedgeImbalance', isComposite: false, isStandalone: true },
        { id: 'standalone', name: 'ReductionAdvisor', tags: ['减仓','对冲','马丁'], subKey: 'factor_reduction_sub', descKey: 'factor_reduction_desc', mqh: 'TEA_ReductionRecommend', isComposite: false, isStandalone: true },
        { id: 'standalone', name: 'RSquared', tags: ['趋势','R²'], subKey: 'factor_rsquared_sub', descKey: 'factor_rsquared_desc', mqh: 'TEA_RSquared / TEA_RSquaredEx', isComposite: false, isStandalone: true }
      ];

      function t(key) {
        var page = 'factors';
        var lang = window.I18N ? window.I18N.getLang() : 'zh';
        var obj = window.I18N && window.I18N.LANG && window.I18N.LANG[page] && window.I18N.LANG[page][lang];
        return (obj && obj[key]) || key;
      }

      function replaceTmpl(str, map) {
        return str.replace(/\{(\w+)\}/g, function (_, k) { return map[k] != null ? map[k] : '{' + k + '}'; });
      }

      var TAG_TO_I18N = { '趋势':'tag_trend', '对冲':'tag_hedge', '马丁':'tag_martin', '网格':'tag_grid', '波动':'tag_vol', '短线':'tag_short', '波段':'tag_swing', '减仓':'tag_reduction', '组合':'tag_composite', '动量':'tag_momentum', '多周期':'tag_mtf', '价差':'tag_spread', 'R²':'tag_r2', '中长线':'tag_mid', '区间':'tag_range', '会话':'tag_session' };

      function filterFactors(selectedTag) {
        if (!selectedTag) return FACTORS;
        if (selectedTag === '__unified__') return FACTORS.filter(function (f) { return !f.isStandalone; });
        if (selectedTag === '__standalone__') return FACTORS.filter(function (f) { return f.isStandalone; });
        return FACTORS.filter(function (f) { return f.tags.indexOf(selectedTag) !== -1; });
      }

      function renderFactors(filtered, pageNum) {
        var listEl = document.getElementById('factor-list-handle');
        var countBar = document.getElementById('factors-count-bar');
        var paginationWrap = document.getElementById('pagination-wrap');
        var paginationInfo = document.getElementById('pagination-info');
        var prevBtn = document.getElementById('pagination-prev');
        var nextBtn = document.getElementById('pagination-next');
        if (!listEl) return;
        var total = filtered.length;
        var totalPages = Math.max(1, Math.ceil(total / PER_PAGE));
        pageNum = Math.max(1, Math.min(pageNum, totalPages));
        var start = (pageNum - 1) * PER_PAGE;
        var slice = filtered.slice(start, start + PER_PAGE);
        countBar.textContent = replaceTmpl(t('factors_count'), { n: total });
        listEl.innerHTML = '';
        slice.forEach(function (f) {
          var card = document.createElement('article');
          card.className = 'factor-card' + (f.isComposite ? ' factor-card-composite' : '');
          card.setAttribute('data-tags', f.tags.join(' '));
          if (f.isStandalone) card.setAttribute('data-api-type', 'standalone');
          else card.setAttribute('data-api-type', 'unified');
          var idBadge = typeof f.id === 'number' ? ('ID ' + f.id) : t('factor_id_standalone');
          var compositeBadge = f.isComposite ? '<span class="factor-badge-composite">' + t('tag_composite') + '</span>' : '';
          var tagsHtml = f.tags.slice(0, 5).map(function (tag) {
            var key = TAG_TO_I18N[tag] || tag;
            return '<span class="factor-tag">' + t(key) + '</span>';
          }).join('');
          card.innerHTML =
            '<div class="factor-card-head">' +
              '<strong>' + f.name + '</strong>' +
              '<span class="factor-id-badge">' + idBadge + '</span>' +
              compositeBadge +
              '<span class="factor-name-en">' + (t(f.subKey) || f.subKey) + '</span>' +
            '</div>' +
            '<div class="factor-tags">' + tagsHtml + '</div>' +
            '<p class="factor-card-desc">' + (t(f.descKey) || f.descKey) + '</p>' +
            '<p class="factor-card-mqh">' + f.mqh + '</p>';
          listEl.appendChild(card);
        });
        paginationWrap.style.display = totalPages > 1 ? '' : 'none';
        paginationInfo.textContent = replaceTmpl(t('pagination_page'), { n: pageNum }) + ' / ' + replaceTmpl(t('pagination_of'), { total: totalPages });
        prevBtn.disabled = pageNum <= 1;
        nextBtn.disabled = pageNum >= totalPages;
        if (paginationWrap) paginationWrap._currentPage = pageNum;
      }

      function applyFilterAndRender() {
        var selectedTag = (document.querySelector('.factor-tag-filter .tag-btn.active') || {}).getAttribute('data-tag') || '';
        var filtered = filterFactors(selectedTag);
        var wrap = document.getElementById('pagination-wrap');
        if (wrap) wrap._currentPage = 1;
        renderFactors(filtered, 1);
      }

      (function () {
        var lang = window.I18N.getLang();
        window.I18N.applyLang(lang, 'factors');
        document.querySelectorAll('.nav-lang .lang-btn').forEach(function (btn) {
          btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
        });
        document.querySelectorAll('.nav-lang .lang-btn').forEach(function (btn) {
          btn.addEventListener('click', function () {
            var l = btn.getAttribute('data-lang');
            window.I18N.setLang(l);
            window.I18N.applyLang(l, 'factors');
            document.querySelectorAll('.nav-lang .lang-btn').forEach(function (b) { b.classList.remove('active'); });
            btn.classList.add('active');
            applyFilterAndRender();
          });
        });
      })();
      (function () {
        var nav = document.getElementById('main-nav');
        var toggle = document.getElementById('nav-toggle');
        if (nav && toggle) toggle.addEventListener('click', function () { nav.classList.toggle('nav-open'); });
      })();
      (function () {
        var btns = document.querySelectorAll('.factor-tag-filter .tag-btn');
        btns.forEach(function (btn) {
          btn.addEventListener('click', function () {
            btns.forEach(function (b) { b.classList.remove('active'); });
            btn.classList.add('active');
            document.getElementById('pagination-wrap')._currentPage = 1;
            applyFilterAndRender();
          });
        });
      })();
      (function () {
        document.getElementById('pagination-prev').addEventListener('click', function () {
          var selectedTag = (document.querySelector('.factor-tag-filter .tag-btn.active') || {}).getAttribute('data-tag') || '';
          var filtered = filterFactors(selectedTag);
          var totalPages = Math.ceil(filtered.length / PER_PAGE);
          var prevPage = (document.getElementById('pagination-wrap')._currentPage || 1) - 1;
          if (prevPage < 1) return;
          document.getElementById('pagination-wrap')._currentPage = prevPage;
          renderFactors(filtered, prevPage);
        });
        document.getElementById('pagination-next').addEventListener('click', function () {
          var selectedTag = (document.querySelector('.factor-tag-filter .tag-btn.active') || {}).getAttribute('data-tag') || '';
          var filtered = filterFactors(selectedTag);
          var totalPages = Math.ceil(filtered.length / PER_PAGE);
          var nextPage = (document.getElementById('pagination-wrap')._currentPage || 1) + 1;
          if (nextPage > totalPages) return;
          document.getElementById('pagination-wrap')._currentPage = nextPage;
          renderFactors(filtered, nextPage);
        });
      })();
      applyFilterAndRender();
    })();
  </script>
</body>

</html>